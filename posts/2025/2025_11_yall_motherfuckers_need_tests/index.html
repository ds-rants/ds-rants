<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="DS Rants">
<meta name="dcterms.date" content="2025-11-20">

<title>Y’All Motherfuckers Need Tests – Data Science Rants</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-5d4073339ea55b1ad5ce071f10a273ff.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-9433ce5a74f539ffa23693f38c94ac7f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Data Science Rants</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Y’All Motherfuckers Need Tests</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">data science</div>
                <div class="quarto-category">software engineering</div>
                <div class="quarto-category">tests</div>
                <div class="quarto-category">best practices</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>DS Rants </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 20, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#big-brain-moment" id="toc-big-brain-moment" class="nav-link active" data-scroll-target="#big-brain-moment">Big Brain Moment</a></li>
  <li><a href="#i-am-a-simple-data-scientist-are-you-sure-i-need-tests" id="toc-i-am-a-simple-data-scientist-are-you-sure-i-need-tests" class="nav-link" data-scroll-target="#i-am-a-simple-data-scientist-are-you-sure-i-need-tests">I Am A Simple Data Scientist, Are You Sure I Need Tests?</a>
  <ul class="collapse">
  <li><a href="#why-should-i-test" id="toc-why-should-i-test" class="nav-link" data-scroll-target="#why-should-i-test">Why Should I Test?</a></li>
  <li><a href="#because-most-data-science-projects-never-reach-production" id="toc-because-most-data-science-projects-never-reach-production" class="nav-link" data-scroll-target="#because-most-data-science-projects-never-reach-production">Because Most Data Science Projects Never Reach Production</a></li>
  <li><a href="#the-main-types-of-tests" id="toc-the-main-types-of-tests" class="nav-link" data-scroll-target="#the-main-types-of-tests">The Main Types of Tests</a></li>
  </ul></li>
  <li><a href="#adopting-a-testing-strategy" id="toc-adopting-a-testing-strategy" class="nav-link" data-scroll-target="#adopting-a-testing-strategy">Adopting A Testing Strategy</a>
  <ul class="collapse">
  <li><a href="#no-tests-at-all" id="toc-no-tests-at-all" class="nav-link" data-scroll-target="#no-tests-at-all">No Tests At All</a></li>
  <li><a href="#writing-tests-after-writing-the-code" id="toc-writing-tests-after-writing-the-code" class="nav-link" data-scroll-target="#writing-tests-after-writing-the-code">Writing Tests After Writing The Code</a></li>
  <li><a href="#writing-tests-and-code-at-the-same-time" id="toc-writing-tests-and-code-at-the-same-time" class="nav-link" data-scroll-target="#writing-tests-and-code-at-the-same-time">Writing Tests And Code At The Same Time</a></li>
  <li><a href="#writing-tests-before-any-code" id="toc-writing-tests-before-any-code" class="nav-link" data-scroll-target="#writing-tests-before-any-code">Writing Tests Before Any Code</a></li>
  <li><a href="#the-advantages-of-tdd" id="toc-the-advantages-of-tdd" class="nav-link" data-scroll-target="#the-advantages-of-tdd">The Advantages Of TDD</a></li>
  </ul></li>
  <li><a href="#the-top-7-obstacles-that-prevent-you-from-testing" id="toc-the-top-7-obstacles-that-prevent-you-from-testing" class="nav-link" data-scroll-target="#the-top-7-obstacles-that-prevent-you-from-testing">The Top 7 Obstacles That Prevent You From Testing</a></li>
  <li><a href="#wrapping-up" id="toc-wrapping-up" class="nav-link" data-scroll-target="#wrapping-up">Wrapping Up</a>
  <ul class="collapse">
  <li><a href="#good-reading" id="toc-good-reading" class="nav-link" data-scroll-target="#good-reading">Good Reading</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="image.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:80.0%"></p>
</figure>
</div>
<section id="big-brain-moment" class="level2">
<h2 class="anchored" data-anchor-id="big-brain-moment">Big Brain Moment</h2>
<blockquote class="blockquote">
<p>“To me, legacy code is simply code without tests.”</p>
<p><em>Michael C. Feathers, Working Effectively with Legacy Code</em></p>
</blockquote>
<blockquote class="blockquote">
<p>“With tests, we can change the behavior of our code quickly and verifiably. Without them, we really don’t know if our code is getting better or worse.”</p>
<p><em>Michael C. Feathers, Working Effectively with Legacy Code</em></p>
</blockquote>
<p>Note: <a href="https://grugbrain.dev/">Big Brain Reference</a></p>
</section>
<section id="i-am-a-simple-data-scientist-are-you-sure-i-need-tests" class="level2">
<h2 class="anchored" data-anchor-id="i-am-a-simple-data-scientist-are-you-sure-i-need-tests">I Am A Simple Data Scientist, Are You Sure I Need Tests?</h2>
<p>Which blog are you on? <em><strong>Data Science Rants!</strong></em> Of course you need tests!</p>
<section id="why-should-i-test" class="level3">
<h3 class="anchored" data-anchor-id="why-should-i-test">Why Should I Test?</h3>
<p>Because it would be nice to have a data science project working once in a while that isn’t a complete dumpster fire. Just for context, for developers nowadays the question isn’t “should I automate my tests?”, but rather “how, when, and on which infrastructure to mirror prod as closely as possible, and independently from other people working on different features?” All senior developers advocate for regular and comprehensive testing strategies. The “State of DevOps” reports show testing as a major component of team performance and software reliability.</p>
<p>Sure, a lot of ‘recent’ advances in the developer and DevOps world have yet to make their entrée into the data world (<a href="https://www.youtube.com/watch?v=459-H33is6o">Data: The Land That DevOps Forgot</a>). One could say we’re poorly equipped in terms of tooling, but one could also say we missed the fucking memo. Some alleged data scientists will happily tell you they don’t version their code without trembling… Also, good luck convincing a junior DS to do anything outside their notebook without throwing a panic fit, or to fully automate their model selection/deployment via a simple CI/CD pipeline. You’ll get an idea of what I mean.</p>
<p>Yet, data science folks are still curled up in a fetal, near-autistic position regarding developer best practices, meaning these concepts are usually totally absent from our average workflows. In the end, why should we adopt something so different from our ways?</p>
</section>
<section id="because-most-data-science-projects-never-reach-production" class="level3">
<h3 class="anchored" data-anchor-id="because-most-data-science-projects-never-reach-production">Because Most Data Science Projects Never Reach Production</h3>
<p>This means we’re wasting time, money, and worse, effort in dead projects when we could be doing more interesting and useful things for society. But it’s fine because we’ve always been told companies are the pinnacle of efficiency.</p>
<p>However, this bitter state of the data science profession is grounded in some harsh realities. In addition to the absence of software engineering best practices, we’re usually in a much worse situation than typical developers. Indeed, we inherently have a particularly strong coupling to the data (shocker, right?). Even small changes over time in data distribution tend to have a tremendous impact on machine learning systems, even though the data’s structure itself stays the same. And you know when that happens? <em>All the fucking time, for every damn use-case!</em></p>
<p>Finally, we usually need to produce large amounts of code just to determine if a given model or analysis has even a chance of being remotely useful. This creates a tension because the code seems constantly in a superposition of states: useless exploratory junk <em>AND</em> awesome preprocessing for a big-gains model. Then some very natural cognitive mechanisms kick in: “I don’t need a test because I don’t know if my code has any worth”. It’s too late at this point because we’ll see the tremendous forces that prevent us from writing tests after the code.</p>
<p>Facing these difficulties requires discipline, and one hell of a kind! We need to import best practices from other IT disciplines that have demonstrated effectiveness in creating reliable software.</p>
<p>One of these practices is testing, so let’s briefly recap some generalities.</p>
</section>
<section id="the-main-types-of-tests" class="level3">
<h3 class="anchored" data-anchor-id="the-main-types-of-tests">The Main Types of Tests</h3>
<p>Unless you’re living under a rock, you’ve probably heard of unit, integration, and acceptance testing. For a good definition, check out <a href="https://martinfowler.com/testing/">Martin Fowler’s Website</a>. In the meantime, my pseudo-standard definitions are:</p>
<ul>
<li><p><strong>Unit tests:</strong> Performed to validate the behavior of isolated functions and methods (more rarely classes and modules). Fast: &lt; 1 ms. My personal take: No dependency on I/O or external systems (disk access, internet, database…), with absolute control of inputs and precise evaluation of outputs.</p></li>
<li><p><strong>Integration tests:</strong> Performed on a collection of functions, usually at the class and module level. Slower in general, but a few seconds max. I/O becomes possible, but my hot take is: you should only interact with local elements (mostly disk, local database replicas, components, or binaries from other subsystems) and nothing that touches the internet.</p></li>
<li><p><strong>Acceptance tests:</strong> Performed on critical system paths to ensure key functionalities. Much slower, aiming for around a few minutes or even less. Otherwise, they’re run less often and start losing value. Here, you can interact with other external systems over the network, databases, and such, but beware, beware!</p></li>
</ul>
<p>These three types of tests constitute the cornerstone of a good, fully automated test suite that will allow you to determine with confidence if your system is working and behaving as expected. Now, one question remains: when should you write your tests?</p>
</section>
</section>
<section id="adopting-a-testing-strategy" class="level2">
<h2 class="anchored" data-anchor-id="adopting-a-testing-strategy">Adopting A Testing Strategy</h2>
<section id="no-tests-at-all" class="level3">
<h3 class="anchored" data-anchor-id="no-tests-at-all">No Tests At All</h3>
<p>You, sir, are dangerous. You should be thrown in jail, and your ugly, dishonest, and deceiving notebook code should be lit on fire. You’re basically handing over a pile of garbage to your coworkers and yelling as you exit the building:</p>
<blockquote class="blockquote">
<p>“And good luck with any changes in business requirements, package version upgrades, refactoring, or general future evolutions, because you know it works on my machine… Oh, and by the way, the business wants this model in production next week…”</p>
</blockquote>
<p>I despise you with every fiber of my being and will definitely high-five you at the first occasion… in the face… with a shovel!</p>
</section>
<section id="writing-tests-after-writing-the-code" class="level3">
<h3 class="anchored" data-anchor-id="writing-tests-after-writing-the-code">Writing Tests After Writing The Code</h3>
<p>Either you have good intentions but don’t know how to do it, and your heart is in the right place. Or you’ve been told to write tests by a concerned tech lead because prod was on fire three times this week, and you reluctantly follow orders like a good soldier. Regardless, there are a few problems with that approach:</p>
<ol type="1">
<li><p>Assuming you’re not a complete moron, you have at least run and tested your code manually, visually, or made sure it compiled. Strangely, the idea of writing a test already starts to lose meaning because you just saw it with your own eyes: the code is running. This mental block is, to me, by far the largest factor that prevents juniors from realizing the value of automated tests.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Really, that’s the main danger. The code runs! You just saw it. Then the brain automatically disconnects, and the lingering thought comes up: “Do I really need a test?” This is where it all ends.</p>
</div>
</div></li>
<li><p>In addition, writing the test afterwards will be extremely painful and difficult because your code has not been written with testability as a core requirement. Then you’ll need some decent luck and great efforts to isolate deterministic behavior in 100 lines of spaghetti with mutations everywhere and no clear responsibilities.</p></li>
<li><p>As a direct consequence, tests also tend to become coupled with implementation details, making them brittle or flaky, and generally more difficult to maintain. The typical example is when you want to change one line in your production code; you clearly see the change, but then you also have to change 20 tests… This is usually a sign of bad coupling between tests and implementation.</p></li>
<li><p>Some large chunks of the system will very likely escape any form of testing (a consequence of <code>reason #2</code>) because of the impossibility to control their inputs and outputs.</p></li>
</ol>
<p>Regardless, writing tests after will probably be a lot of pain, especially if a higher-up dropped a decaying legacy project on your lap. In which case, you should turn to experts who will tell you how to effectively <a href="https://youtu.be/P_6eDL1aqtA?si=DieijfL9LdZeWTlj">test and manage the complexity of legacy codebases (remember: code without tests)</a>.</p>
</section>
<section id="writing-tests-and-code-at-the-same-time" class="level3">
<h3 class="anchored" data-anchor-id="writing-tests-and-code-at-the-same-time">Writing Tests And Code At The Same Time</h3>
<p>Now we’re finally getting somewhere. Most of the issues mentioned in the previous section start to erode, with the main exception of <code>reason #3</code>. The main risk with writing tests concurrently with code is increasing the coupling between the test and the code beyond what is strictly required. This reduces maintainability and limits future changes and evolution.</p>
<p>However, there are cases where this approach can be fruitful, especially for certain scopes and contexts (more on that later).</p>
</section>
<section id="writing-tests-before-any-code" class="level3">
<h3 class="anchored" data-anchor-id="writing-tests-before-any-code">Writing Tests Before Any Code</h3>
<p>At last, for any sleeping data scientist who managed to open an eyelid, this is the bread and butter of any self-respecting developer these days. This is called Test-Driven Development, a.k.a. <strong>TDD</strong>, and this is <a href="https://www.youtube.com/watch?v=B1j6k2j2eJg">how to do it properly</a>:</p>
<ol type="1">
<li><strong>RED:</strong> You write a <strong>failing</strong> test, which, from well-defined inputs, asserts that a given piece of code has certain well-defined outputs. This is akin to writing specifications in the code.</li>
<li><strong>GREEN:</strong> You write the smallest, most simplistic, even idiotic code you can think of to make the test pass. Nothing more!</li>
<li><strong>REFACTOR:</strong> You replace the idiotic part you just wrote with something less stupid or ugly. <strong>But pay attention!</strong> You should not write anything that is not inside the test. The point is to let the tests and specifications drive the code.</li>
</ol>
<p>And you repeat the cycle!</p>
</section>
<section id="the-advantages-of-tdd" class="level3">
<h3 class="anchored" data-anchor-id="the-advantages-of-tdd">The Advantages Of TDD</h3>
<p>This (apparently contrived) way of testing has dramatic advantages:</p>
<ul>
<li>It completely breaks the idea of: “I don’t need a test because I just saw my code run” because the code doesn’t even exist yet.</li>
<li>You are writing specifications for the observable behavior in the tests, not implementation details, meaning tests and code are less coupled.</li>
<li>It forces you to write code in very small, incremental steps, and all the great old wizards of software engineering are pretty much saying this is the best way to work, period!</li>
<li>You are usually able to fall back to working code with a bunch of automated tests within a few seconds. This is such a change that Kent Beck, the guy who coined the term TDD, called it Xanax for developers!</li>
<li>The code becomes easier to test because you’re writing with a clear goal to make it testable; otherwise, you’re just making your life difficult. Duh!</li>
<li>The incremental nature forces a progressive decoupling between the code and the test, which is a great sign for maintainability and increases the possibility of future changes.</li>
<li>Because you want things to be easy to test, you naturally limit the scope of what your functions/classes can do, which increases their internal cohesion. They tend to do fewer things but do them better.</li>
</ul>
<p>Overall, writing tests first has such a strong impact on your design. Namely, it prevents you from doing stupid shit, like becoming your worst enemy and face-planting your project 3 meters underground. You will actually keep the possibility to continue making changes to your code (see the <strong>excellent YouTube channel</strong> <a href="https://www.youtube.com/@ModernSoftwareEngineeringYT/videos">Modern Software Engineering</a>). Ain’t that good enough in itself?</p>
<blockquote class="blockquote">
<ul>
<li>“But Sir Rants, if TDD is that good, why are data scientists not doing it?”</li>
<li>“Young lad, thank you for the very interesting question, allow me to introduce you to: …”</li>
</ul>
</blockquote>
</section>
</section>
<section id="the-top-7-obstacles-that-prevent-you-from-testing" class="level2">
<h2 class="anchored" data-anchor-id="the-top-7-obstacles-that-prevent-you-from-testing">The Top 7 Obstacles That Prevent You From Testing</h2>
<p>Dear reader, I apologize for the sudden surge of click-bait writing style, but this will likely be a long post, anyhow… Actually, I am not sorry at all. I am simply taking into account your Ritalin-infused brain equipped with the attention span of a cocaine-high chihuahua.</p>
<p>Writing tests is difficult, even for seasoned developers. However, writing tests first with TDD is actually easier but also requires a strong shift of mindset. In this bit, we’re going to focus mostly on unit tests. Reminder: the features of good unit tests are: <em>fast, deterministic, reproducible, decoupled from implementation details</em>.</p>
<ol type="1">
<li><p>Most people advocating for the practice of TDD will repeat that it’s an acquired skill, one that you need to train regularly. It will take you time and practice to master it. You can obviously set yourself up for failure by jumping directly into an old legacy project when you’ve never written an automated test. That sounds like a totally reasonable thing to do.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Start practicing regularly with simple code katas. Do not attempt to test legacy codebases or data science workflows yet. It will very likely take you at least 3-4 months to get comfortable with the basics of testing.</p>
<p>If possible, use a small side project at work where your hands are free to move, safe from the nasty clutches of a greedy product manager.</p>
</div>
</div></li>
<li><p>The things you’ll try to test at first will probably be too large, and the scope poorly defined. You can try to test the thing that has 10 input parameters and 3 different possible output types. Sure, you can try…</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Try to really limit the size and scope of functionalities you try to test at a given time. Take a smaller approach. When you think this is small enough, make it even smaller!</p>
</div>
</div></li>
<li><p>One very common error is to try to test the main functionality of a future piece of code right from the get-go. Rookie mistake! This is like head-butting a piece of concrete to make a wall fall down; it might work, but you might not be able to repeat that feat once your skull is cracked open.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Do not jump directly to the core of the functionalities; start with the simple things and let the behavior progressively emerge from the iterative process. Let’s take an idiotic example: imagine you want to sort elements of a list. Rather than giving a list of 10 numbers and making sure they are sorted in the end, start by passing an empty list (Great! We just found an edge case!), then perhaps a list with one element (shocker, input and output should be the same…).</p>
</div>
</div></li>
<li><p>Once you get the basics, please be sure to wait until you discover some catastrophic production failure before incorporating any kind of testing strategy. You definitely want to lose financial transactions first or have a very strong bias in your model exposed to your users. This should motivate you. Now let’s back up a bit, and imagine after 6 months of crunching and regurgitating code, you’re saying to your Product Manager that suddenly you want to write tests because one day you woke up and decided you cared about quality (hopefully after reading this rant).</p>
<p>Now imagine that at the start of your project, you said to that blissfully unaware PM: “There shall be a test for every bit of code produced, and no test means no code, means no feature!” The only possible answer for that PM will be: “Amen.”</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Start adopting a testing strategy as soon as possible in the project’s lifetime, and hold onto it like your grandma holds onto the steering wheel while plowing through a crowd. In the extremely likely case of a legacy project, you must be aware that some bits will be impossible to test. This is where having practiced in isolation first (step 1.) will save you on more than a couple of occasions:</p>
<ul>
<li>Find the separations inside the codebase where testing is possible in isolation; move it apart from the rest of the junk.</li>
<li>Test the newly produced code.</li>
</ul>
</div>
</div></li>
<li><p>Please make sure to make your tests as slow, flaky, and brittle as possible by systematically reading from the disk or, worse, the network or the database. This way, you’ll be sure the tests are never run because they take 3 hours to complete, and you never know why they fail.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Stay away from any kind of I/O, i.e., disk reads or writes, network calls, database calls, cloud interaction. You should refrain from committing such ungodly horrors. They do not belong in your unit-testing strategy, and even in integration testing, use them only if they <strong>REALLY CANNOT BE AVOIDED</strong>.</p>
</div>
</div></li>
<li><p>Not knowing your testing framework is a pretty good way to butcher and obscure your test suite. Similarly, you can abuse mocking and stubbing your classes and functions to ensure that nobody, not even you in two weeks, understands whatever the test is doing. Continue in that direction, and you will even create tests that assert nothing at all!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Take the time to understand how your testing framework is designed; what it allows you to reuse and what you should rewrite. Limit the mocking to the strict minimum to avoid dependencies on external services, but beware of their dark side.</p>
</div>
</div></li>
<li><p>Not properly setting up your local environment and not learning to use your IDE/text editor is a very good way to set yourself up for failure. I saw you clearly wallowing in self-inflicted pain because you manually renamed each of the 10 occurrences of your variable when I forced you to get rid of the thing you so proudly named “temp”. Your hesitation was palpable when I spoke about extracting a method, and you reached for the copy/paste like a headless chicken. How can you hope to write tests if you can’t even navigate your codebase and perform the most basic actions to change it?</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Solution
</div>
</div>
<div class="callout-body-container callout-body">
<p>Although it may appear secondary, you absolutely need to properly configure and be comfortable with your local environment. Otherwise, it will become a mental blocker and a hidden obstacle to your workflow. Install test extensions or plugins for your language inside your editor. You need first-class support to be able to run a single test, or all of them for a given class/file. Your whole test suite should run at will, using a single click or a small terminal call.</p>
</div>
</div></li>
</ol>
<p>This list of recommendations is a watered-down version of the many pieces of advice available in the sources and links of this rant. Please go check them out. Or don’t; I’m not the boss of you, but then don’t complain if you have a ludicrous 3-week ping-pong workflow with the Devs and Ops teams to put your scrappy model in production…</p>
</section>
<section id="wrapping-up" class="level2">
<h2 class="anchored" data-anchor-id="wrapping-up">Wrapping Up</h2>
<p>The purpose of this rant is not to help the greedy manager piling up more tasks on the shoulders of burned-out developers, nor to give them excuses to say: “You need to be more productive”. My goal is to give you tools and feedback that have been shown to reduce mental workload and make projects more manageable. I want you to be able to free up some time to reflect on your own data science practices.</p>
<p>I don’t necessarily want you to use TDD everywhere. But it is one of the fundamentals of software engineering, and like any basic move, one should master it before claiming they don’t need it.</p>
<p>Mastering the fundamentals of testing is probably the best chance we have to integrate quality into data science. This much-needed desire for quality will allow us to kill dangerous or useless projects from the start and select the ones that should live. We are definitely going to require that if we want to do anything remotely useful in our society.</p>
<p>And for that, we will see next time the specifics of testing in data science, but in the meantime, let’s keep in mind:</p>
<blockquote class="blockquote">
<p>Primum Non Nocere</p>
</blockquote>
<p>First, do no harm.</p>
<section id="good-reading" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="good-reading">Good Reading</h3>
<ul>
<li>Modern Software Engineering - David Farley - ISBN: 9780137314867</li>
<li>Extreme Programming Explained: Embrace Change - Beck, Kent; Andres, Cynthia - ISBN 10: 0321278658 / ISBN 13: 9780321278654</li>
<li>Team Topologies - Matthew Skelton; Manuel Pais - ISBN: 9781966280002</li>
<li>Accelerate: The Science of Lean Software and DevOps - Gene Kim, Jez Humble, Nicole Forsgren - ISBN 10: 1942788339 / ISBN 13: 9781942788331</li>
<li>Test Driven Development: By Example - Kent Beck - ISBN: 9780321146533</li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/ds-rants\.github\.io\/ds-rants\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>